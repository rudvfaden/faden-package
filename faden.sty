% -*- root: test.tex -*-
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{faden}[11/08/14 My Own LaTeX package]
%%--------------------------------------------------------------------------
%% Pacakges
%%--------------------------------------------------------------------------
\RequirePackage[top=2.5cm, bottom=2.5cm, left=3.5cm, right=3.5cm]{geometry} %Margins

% Title and author
\makeatletter
\def\@maketitle{%
  \newpage
  %\vspace{-\topskip}      % remove the initial space
  \vskip 6em
   \flushleft Incomplete draft. Please do not cite or quote without premission
  \vskip 6em
  {}
  \begingroup\flushleft    % instead of \begin{center}
  \let \footnote \thanks
  \hrule height \z@        % to avoid the insertion of lineskip glue
    {\LARGE \protect\textbf{\@title} \par}%
    \vskip 2.5em
    {\large
      \lineskip .5em

        \@author
        \par}%
    \vskip 1.5em
    {\small
      \@date}
  \par\endgroup            % instead of \end{center}
  \vskip 6em             % <--- modify this to adjust the separation
}
\makeatother
% font
\usepackage{MnSymbol}
\usepackage[mathlf,textlf,minionint]{MinionPro}
\RequirePackage{microtype} 									% improves the spacing between words and letters
\RequirePackage{fixltx2e} 									% fix common latex errors
% Sections
\RequirePackage[explicit]{titlesec}
\RequirePackage{textcase}

% sections and title

\titleformat{\section}
  {\normalfont}{\thesection}{1em}{\MakeUppercase{#1}}
% subsection
\titleformat{\subsection}
  {\normalfont}{\thesubsection}{1em}{\itshape{#1}}
% subsubsection
\titleformat{\subsubsection}
  {\normalfont}{\thesubsubsection}{1em}{\itshape{#1}}

%% Math
\RequirePackage{mathtools} 									% math
\RequirePackage{amsthm} 									% theorems and definition
\RequirePackage{bm} 										% Bold math
%% Figures and tables
\RequirePackage{booktabs} 									% pretty tables
\RequirePackage{subcaption} 								% subfigures
\RequirePackage{pgfplots,tikz} \pgfplotsset{compat =1.11} 	% figures
\usetikzlibrary{decorations.pathreplacing}
%% References
\RequirePackage{hyperref}  									% hypersetup
\RequirePackage{cleveref} 									% auto-detect cross reference type when using \cref
% bibliography
\RequirePackage{csquotes}
\emergencystretch=1em
\RequirePackage[%
backend=bibtex,   										% use BibTeX
style=chicago-authordate,
natbib=true,
bibwarn=true,
backref=true,
url=false, isbn=false
]{biblatex}
%% Misc.
\RequirePackage[colorinlistoftodos]{todonotes} 				% todo notes
\RequirePackage{url} 										% for line breaks in url links
\RequirePackage[titletoc,toc,title]{appendix} 				% appendices
\RequirePackage{accents} 									% underbar
% Index
\RequirePackage{imakeidx} 									% Index
\RequirePackage{xstring}
\RequirePackage{xcolor}
%Draft option
\RequirePackage{ifdraft}
% Page margins

%%--------------------------------------------------------------------------
%% Colors and hypersetup
%%--------------------------------------------------------------------------
\definecolor{webgreen}{rgb}{0,.5,0}
\definecolor{webbrown}{rgb}{.6,0,0}
\definecolor{myblue}{HTML}{394773}
\hypersetup{
	colorlinks = true,      					%	Color links instead of ugly boxes
	urlcolor   = webbrown,  					%	Colors for external hyperlinks
	linkcolor  = myblue,      					%	Colors of internal links
	citecolor  = webgreen,						%	Colors of citations
	pdfauthor = {\myauthor},
  pdftitle = {\mytitle},
  pdfkeywords = {\mykeywords}
	pdfcreator = {LaTeXing}
}
%%--------------------------------------------------------------------------
%% Commands
%%--------------------------------------------------------------------------
% math
\newcommand{\ubar}[1]{\underaccent{\bar}{#1}} % underbar
\global\long\def\argmax{\operatornamewithlimits{arg\, max}} % argmax
% partial derivative with optional second argument
\makeatletter
\DeclareRobustCommand{\pder}[1]{%
  \@ifnextchar\bgroup{\@pder{#1}}{\@pder{}{#1}}}
\newcommand{\@pder}[2]{\frac{\partial#1}{\partial#2}}
\makeatother
% Sets
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\C}{\mathbb{C}}
%%--------------------------------------------------------------------------
%% Theorem & Definitions
%%--------------------------------------------------------------------------
\newcounter{dummy} \numberwithin{dummy}{section}
% Theorem Styles
\newtheorem{theorem}[dummy]{Theorem}
\newtheorem{lemma}[dummy]{Lemma}
\newtheorem{proposition}[dummy]{Proposition}
\newtheorem{corollary}[dummy]{Corollary}
\newtheorem{assumption}[dummy]{Assumption}
% Definition Styles
\theoremstyle{definition}
\newtheorem{definition}{Definition}[dummy]
\newtheorem{example}{Example}[dummy]
\theoremstyle{remark}
\newtheorem{remark}{Remark}[dummy]

%%--------------------------------------------------------------------------
%% Other
%%--------------------------------------------------------------------------

\setkeys{Gin}{width=1\textwidth} % make figures as wide as the margins
%%Important words are added to the index and printed in different bold
\newcommand{\important}[1]
{\IfSubStr{#1}{!}
    {\textcolor{black}{\textbf{\StrBefore{#1}{!}~\StrBehind{#1}{!}}}\index{#1}}
    {\textcolor{black}{\textbf{#1}}\index{#1}\kern-1pt}
}